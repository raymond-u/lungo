- id: app
  match:
    url: '{{ base_url }}app/<(?!filebrowser/(?:api/public|share|static))[^/]*><.*>'
    methods:
      - GET
      - POST
      - DELETE
      - PATCH
      - PUT
      - HEAD
      - OPTIONS
  authenticators:
    - handler: cookie_session
    - handler: anonymous
  authorizer:
    handler: remote_json
  mutators:
    - handler: header
  errors:
    - handler: json

- id: public
  match:
    url: '{{ base_url }}app/filebrowser/<(?:api/public|share|static)>/<.*>'
    methods:
      - GET
      - POST
      - DELETE
      - PATCH
      - PUT
      - HEAD
      - OPTIONS
  authenticators:
    - handler: noop
  authorizer:
    handler: allow
  mutators:
    - handler: noop
  errors:
    - handler: json

- id: catch-all
  match:
    url: '{{ base_url }}<(?!app/).*>'
    methods:
      - GET
      - POST
      - DELETE
      - PATCH
      - PUT
      - HEAD
      - OPTIONS
  authenticators:
    - handler: noop
  authorizer:
    handler: allow
  mutators:
    - handler: noop
  errors:
    - handler: json
