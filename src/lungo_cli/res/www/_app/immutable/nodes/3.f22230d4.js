import{s as d,o as l}from"../chunks/scheduler.e108d1fd.js";import{S as m,i as p}from"../chunks/index.63e0e998.js";function f(s){return new URLSearchParams(Array.from(new FormData(s),([e,a])=>[e,a]))}function h(s){return l(()=>{const e=document.createElement("script");e.src="/rstudio/js/encrypt.min.js",e.onload=async()=>{const a=()=>window.location.href="/rstudio/";try{let t=await fetch("/auth/api/state");if(!t.ok)return a();const o=`${(await t.json()).data.username}
passwd`;if(t=await fetch("/rstudio/",{redirect:"manual"}),t.ok||(t=await fetch("/rstudio/auth-sign-in",{headers:{"X-Bypass":"1"}}),!t.ok))return a();let r=await t.text();const n=new DOMParser().parseFromString(r,"text/html"),i=n.getElementsByName("public-key-url")[0].getAttribute("content");if(t=await fetch(`/rstudio/${i}`),!t.ok)return a();r=await t.text();const[c,u]=r.split(":",2);n.getElementById("clientPath").value="/rstudio/auth-sign-in",n.getElementById("package").value=encrypt(o,c,u),n.getElementById("persist").value="0",t=await fetch("/rstudio/auth-do-sign-in",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Bypass":"1"},redirect:"manual",body:f(n.getElementsByName("realform")[0])})}finally{a()}},document.head.appendChild(e)}),[]}class B extends m{constructor(e){super(),p(this,e,h,null,d,{})}}export{B as component};
