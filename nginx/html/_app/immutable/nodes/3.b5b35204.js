import{s as h,f as p,n as c}from"../chunks/scheduler.63274e7e.js";import{S as f,i as g,g as y,z as _,h as w,y as k,f as l,k as v,x,A as E}from"../chunks/index.0765c294.js";function b(o){let e,a="",t,n,s;return{c(){e=y("script"),e.innerHTML=a,this.h()},l(r){const i=_("svelte-156y4tr",document.head);e=w(i,"SCRIPT",{src:!0,"data-svelte-h":!0}),k(e)!=="svelte-g2t9yy"&&(e.innerHTML=a),i.forEach(l),this.h()},h(){p(e.src,t="/rstudio/js/encrypt.min.js")||v(e,"src",t)},m(r,i){x(document.head,e),n||(s=E(e,"load",o[0]),n=!0)},p:c,i:c,o:c,d(r){l(e),n=!1,s()}}}function B(o){return[async()=>{const a=()=>window.location.href="/rstudio/";try{let t=await fetch("/rstudio/",{credentials:"include",redirect:"manual"});if(t.ok||(t=await fetch("/rstudio/auth-sign-in",{credentials:"include",redirect:"manual"}),!t.ok))return a();let n=await t.text();const s=new DOMParser().parseFromString(n,"text/html"),r=s.getElementsByName("public-key-url")[0].getAttribute("content");if(t=await fetch(`/rstudio/${r}`,{credentials:"include"}),!t.ok)return a();n=await t.text();const d=`${t.headers.get("Remote-User")}
passwd`,[u,m]=n.split(":",2);s.getElementById("clientPath").value="/rstudio/auth-sign-in",s.getElementById("package").value=encrypt(d,u,m),s.getElementById("persist").value="0",s.getElementsByName("realform")[0].submit()}finally{a()}}]}class S extends f{constructor(e){super(),g(this,e,B,b,h,{})}}export{S as component};
